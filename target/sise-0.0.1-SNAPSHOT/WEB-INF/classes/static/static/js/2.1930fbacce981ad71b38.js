webpackJsonp([2],{ATuk:function(e,t){},MYmO:function(e,t,a){var l={"./stu_addhistory.vue":"kVrP","./stu_addmark.vue":"cn/i"};function i(e){return a(r(e))}function r(e){var t=l[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}i.keys=function(){return Object.keys(l)},i.resolve=r,e.exports=i,i.id="MYmO"},"cn/i":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l={data:function(){return{sizeForm:{userid:JSON.parse(window.localStorage.getItem("user")).userid,addname:"",addtype:"",adddate:"",addmark:0,adddesc:"",addpath:"",tag:"否"},fileList:[],dialogImageUrl:"",dialogVisible:!1,hideUpload:!1,limitCount:1}},methods:{onSubmit:function(){var e=this;e.sizeForm.addname||e.sizeForm.adddesc||e.sizeForm.addtype||e.sizeForm.addmark||e.sizeForm.adddate?""==this.sizeForm.addpath?this.$message.error("请先上传证明"):(console.log(e.sizeForm),this.postRequest("/student/add",this.sizeForm).then(function(t){t&&200==t.status&&e.$router.push({path:"/students/addhistory"})})):this.$message.error("请输入完整信息")},submitUpload:function(){this.$refs.upload.submit()},handleRemove:function(e,t){this.hideUpload=t.length>=this.limitCount,console.log(e,t)},handleSuccess:function(e,t,a){e&&(this.$message({type:"success",message:"上传成功"}),console.log(e),this.sizeForm.addpath=e)},handleError:function(e,t,a){this.$message({type:"error",message:"上传失败"})},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleOnchang:function(e,t){this.hideUpload=t.length>=this.limitCount}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"view"},[a("el-form",{ref:"form",staticStyle:{"margin-top":"20px"},attrs:{model:e.sizeForm,"label-width":"80px",size:"medium"}},[a("el-form-item",{attrs:{label:"加分名称"}},[a("el-input",{attrs:{"prefix-icon":"el-icon-edit"},model:{value:e.sizeForm.addname,callback:function(t){e.$set(e.sizeForm,"addname",t)},expression:"sizeForm.addname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"加分类型"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择加分类型"},model:{value:e.sizeForm.addtype,callback:function(t){e.$set(e.sizeForm,"addtype",t)},expression:"sizeForm.addtype"}},[a("el-option",{attrs:{label:"专业技能",value:"专业技能"}}),e._v(" "),a("el-option",{attrs:{label:"创造能力",value:"创造能力"}}),e._v(" "),a("el-option",{attrs:{label:"组织管理能力",value:"组织管理能力"}}),e._v(" "),a("el-option",{attrs:{label:"文体能力",value:"文体能力"}}),e._v(" "),a("el-option",{attrs:{label:"社会实践能力",value:"社会实践能力"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"加分时间"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"218%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.sizeForm.adddate,callback:function(t){e.$set(e.sizeForm,"adddate",t)},expression:"sizeForm.adddate"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"加分分值"}},[a("el-slider",{attrs:{"show-input":""},model:{value:e.sizeForm.addmark,callback:function(t){e.$set(e.sizeForm,"addmark",t)},expression:"sizeForm.addmark"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"加分说明"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.sizeForm.adddesc,callback:function(t){e.$set(e.sizeForm,"adddesc",t)},expression:"sizeForm.adddesc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"加分证明"}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",class:{hide:e.hideUpload},attrs:{action:"/student/upload",accept:"image/*","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"on-error":e.handleError,"on-change":e.handleOnchang,"file-list":e.fileList,"list-type":"picture-card","auto-upload":!1}},[a("i",{staticClass:"el-icon-plus"}),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传图片文件")])]),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-top":"20px"},attrs:{size:"large"}},[a("el-button",{attrs:{size:"large",type:"success"},on:{click:e.submitUpload}},[e._v("上传证明")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]};var r=a("C7Lr")(l,i,!1,function(e){a("l7oS")},null,null);t.default=r.exports},kVrP:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("ZLEe"),i=a.n(l),r={data:function(){return{tableData:[],currentPage:1,pageSize:5,search:"",loading:!1}},methods:{formatter:function(e,t){return e.addname},handleCurrentChange:function(e){console.log("当前页: "+e),this.currentPage=e},getHistory:function(){var e=this;this.loading=!0,this.getRequest("/student/list").then(function(t){t&&200==t.status&&(e.loading=!1,e.tableData=t.data)})}},mounted:function(){this.getHistory()},computed:{tables:function(){var e=this.search;return e?this.tableData.filter(function(t){return i()(t).some(function(a){return String(t[a]).toLowerCase().indexOf(e)>-1})}):this.tableData}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"view"},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤","prefix-icon":"el-icon-search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tables.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),"default-sort":{prop:"adddate"}}},[a("el-table-column",{attrs:{prop:"adddate",label:"日期",sortable:"",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"addname",label:"加分名称",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"addtype",label:"加分类型",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"addmark",label:"分值",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"adddesc",label:"加分说明",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tag",label:"是否审批",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"addpath",label:"加分证明"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"left",trigger:"click"}},[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{slot:"reference",src:t.row.addpath},slot:"reference"}),e._v(" "),a("el-image",{staticStyle:{width:"700px",height:"700px"},attrs:{src:t.row.addpath}})],1)]}}])})],1),e._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"15px"}},[a("el-pagination",{attrs:{align:"center","current-page":e.currentPage,"page-size":e.pageSize,layout:"total, prev, pager, next, jumper",total:e.tableData.length},on:{"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var o=a("C7Lr")(r,s,!1,function(e){a("ATuk")},null,null);t.default=o.exports},l7oS:function(e,t){}});
//# sourceMappingURL=2.1930fbacce981ad71b38.js.map